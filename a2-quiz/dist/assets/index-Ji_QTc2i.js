(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))s(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function n(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(t){if(t.ep)return;t.ep=!0;const r=n(t);fetch(t.href,r)}})();function N(o,e){let n=[];u()&&(n=[...u()]);const s={name:o,time:e};n.push(s),localStorage.setItem("players",JSON.stringify(n)),k()}function u(){return JSON.parse(localStorage.getItem("players"))}function P(){const o=[];if(u()){const e=[...u()];for(let n=0;n<e.length&&n<5;n++)o.push(e[n])}return o}function k(){const e=[...u()].sort((n,s)=>n.time-s.time);localStorage.setItem("players",JSON.stringify(e))}const h="https://courselab.lnu.se/quiz/question/1";let m=h,L;const b=document.getElementById("startpage"),g=document.getElementById("questionpage"),E=document.getElementById("loserpage"),w=document.getElementById("winnerpage"),I=document.getElementById("scoreboard"),S=document.getElementById("progresspage"),R=document.getElementById("startbutton"),U=document.getElementById("answerbutton"),A=document.getElementById("againbuttonlose"),J=document.getElementById("againbuttonwin");let f,C,p,d;function x(){a(g),a(E),a(w),a(I),a(S),l(b)}function Q(){a(b),a(E),a(w),a(I),l(g),l(S)}function y(){a(b),a(g),a(w),a(S),l(E),l(I),O()}function j(){a(b),a(g),a(E),a(S),l(w),l(I);const o=document.getElementById("winnername"),e=document.getElementById("winnertime");N(d.value,f),O(),o.textContent="Well done "+d.value+"!",e.textContent="Your time was: "+f+" seconds"}function O(){const o=P(),e=document.getElementById("scoreboardmain");e.innerHTML="";const n=document.createElement("h3");n.type="h3",n.textContent="Scoreboard",e.appendChild(n);let s=1;o.forEach(r=>{const i=document.createElement("text");i.type="p",i.textContent=s+". "+r.name+": "+r.time+" seconds",e.appendChild(i),e.innerHTML+="<br>",s++});const t=document.createElement("showall");t.textContent="Show All Scores",t.style.color="blue",t.addEventListener("click",r=>{const i=u();e.innerHTML="";const c=document.createElement("h3");c.type="h3",c.textContent="Scoreboard",e.appendChild(c);let T=1;i.forEach(B=>{const v=document.createElement("text");v.type="p",v.textContent=T+". "+B.name+": "+B.time+" seconds",e.appendChild(v),e.innerHTML+="<br>",T++})}),e.appendChild(t)}R.addEventListener("click",o=>{d=document.getElementById("nickname"),d.value===""?d.style.borderColor="red":(d.style.borderColor="",Q(),H(h),M(),F())});U.addEventListener("click",async o=>{const e=document.getElementById("answerinput");if(e.value===""||e.value==="on")y();else{const n=await z();m===void 0&&n?(j(),clearInterval(p)):n?(H(m),W()):(y(),clearInterval(p))}});A.addEventListener("click",o=>{m=h,x()});J.addEventListener("click",o=>{m=h,x()});function a(o){o.style.display="none"}function l(o){o.style.display="block"}function F(){f=0,G(),C=setInterval(o,1e3);function o(){f++}}function G(){clearInterval(C)}function M(){const o=document.getElementById("progressbar"),e=document.getElementById("progresslabel");let n=90;e.innerHTML="Time remaining: "+n/10,o.style.width=n+"%",p=setInterval(s,1e3);function s(){n<=0||g.style.display==="none"?(y(),clearInterval(p)):(n-=10,e.innerHTML="Time remaining: "+n/10,o.style.width=n+"%")}}function W(){clearInterval(p),M()}async function q(o){return await(await fetch(o)).json()}async function H(o){const e=await q(o),n=document.getElementById("questionheader"),s=document.getElementById("question"),t=document.getElementById("answerinput");if(n.innerHTML="Question "+e.id+":",s.innerHTML=e.question,t.innerHTML="","alternatives"in e)for(const r in e.alternatives){const i=document.createElement("input");i.type="radio",i.name="alternatives",i.id=r,i.value=e.alternatives[r],i.classList="radioInput",t.style.textAlign="left",t.appendChild(i);const c=document.createElement("label");c.htmlFor=e.alternatives[r],c.textContent=e.alternatives[r],c.classList="radioText",t.appendChild(c),t.innerHTML+="<br>"}else{const r=document.createElement("input");r.type="text",r.name="inputtext",r.id="inputtext",t.style.textAlign="center",t.style.padding="30px",t.appendChild(r)}L=e.nextURL}async function z(){const o=await q(m);let e,n;if("alternatives"in o){const s=document.getElementsByClassName("radioInput");for(let t=0;t<s.length;t++)if(s[t].checked){e=s[t].id,n=await fetch(L,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({answer:e})});break}}else e=document.getElementById("inputtext").value,n=await fetch(L,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({answer:e})});return n.status===200?(m=(await n.json()).nextURL,!0):(y(),!1)}x();
